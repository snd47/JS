<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bubble</title>
</head>
<body>
<script>
    //                  ---- Сортировка пузырьком с флагом ----

    var a= [3,14,1,-10,3,5,99,12,4], i, j, k, n = a.length, f;

    console.log(a);
    console.log('Итерации:');

    // Введём дополнительную булевую(можно и не булевую) переменную, которая будет сообщать о том, что все элементы массива отсортированы

    for (j=0; j<n-1; j++) {		// ОДЕЛИ В ЦИКЛ ( и потом "одели во флаг")
        f = false;              // обозначили флаг

            for (i = 0; i < n - 1; i++) {		// n-1 потому что последний элемент менять не с чем т.к. он последний
                if (a[i] > a[i + 1]) {           // сравниваем каждый элемент(первый со следующим и т.д.)
                    k = a[i];			        // записываем больший элемент массива во временную переменную k (сохранили себе в память)
                    a[i] = a[i + 1];		    // а на её место записываем меньший элемент i+1, т.е. затираем прошлый больший элемент меньшим
                    a[i + 1] = k;			    // теперь замещаем меньший элемент большим, доставая его из памяти k. (толкаем вперёд)
                    // debugger;                 // Здесь можно посмотреть самому, детально каждый шаг цикла
                    f = true;
                }
            }

            if (!f) break;      // если внутренний цикл не сработал и флаг так и остался false прекращаем внешний цикл
        console.log(a);

    }

    console.log('Итого:');
    console.log(a);
    console.log(f);
    // Теперь нет лишних итераций
    // Закрепим тему ещё одним элегантным способом

    // ПС: Также напоследок вопрос, почему всё же происходит 1 дополнительная итерация?

</script>

</body>
</html>