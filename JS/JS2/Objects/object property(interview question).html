<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>

    var foo ={n:1};         //(*1)
    var bar = foo;          //(*2)

    foo.x = foo = {n:2};    //(*3)


     console.log(foo.x);     // Что будет выведено? Почему? (*4)

    // Проверка
     console.log(bar);      //(*5)
     console.log(foo);

    // 1. Создали объект {n:1} с одним ключем и ссылку на него foo
    // 2. Создали вторую ссылку  - bar на объект {n:1}

    // 3. -------------------------------- Объяснение -------------------------------------------------------------
    // Вначале происходит вычисление подвыражений, которое всегда происходит слева направо.
    // Т.е. вычисляется foo.x, JS смотрит чему foo равен, он равен {n:1}, и дальше(в этой строке) будет происходить операция
    // непосредственно с .
    // Потом происходит выполнение присваивания, которое по правилу ассоциативности происходит справа налево.
    // foo.x = (foo = {n:2});

    // И как только выражение(*4) отработает foo изменится, и соответственно свойства "x" у него уже не будет.
    // А несуществующие свойства объекта равны undefined.
    // Хотя объект {n:1} продолжит существовать, и его добавленное свойство "x" можно увидеть через оставшуюся
    // переменную-ссылку bar(*5)

</script>

</body>
</html>